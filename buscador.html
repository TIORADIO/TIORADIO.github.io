function buscarNoticias() {
  // Obtener la información del formulario
  const titulo = document.getElementById('titulo').value;
  const genero = document.getElementById('genero').value;
  const autor = document.getElementById('autor').value;
  const dui = document.getElementById('dui').value;
  const mos = document.getElementById('mos').value;
  const chovo = document.getElementById('chovo').value;

  // Obtener los archivos HTML de la carpeta noticias
  const xhr = new XMLHttpRequest();
  xhr.open('GET', './noticias/');
  xhr.send();

  xhr.onload = function() {
    if (xhr.status !== 200) {
      mostrarError('Error al cargar los archivos HTML');
      return;
    }

    // Obtener la lista de archivos HTML
    const archivosHTML = xhr.response.match(/href="([^"]+)"/g).map(function(href) {
      return href.replace('href="', '').replace('"', '');
    });

    // Buscar en cada archivo HTML
    const resultados = archivosHTML.filter(function(archivo) {
      const xhr2 = new XMLHttpRequest();
      xhr2.open('GET', './noticias/' + archivo);
      xhr2.send();

      xhr2.onload = function() {
        if (xhr2.status !== 200) {
          mostrarError('Error al cargar el archivo HTML ' + archivo);
          return;
        }

        // Obtener los metatags del archivo HTML
        const metatags = xhr2.response.match(/<meta name="([^"]+)" content="([^"]+)">/g).map(function(meta) {
          const nombre = meta.match(/<meta name="([^"]+)" content="([^"]+)">/)[1];
          const contenido = meta.match(/<meta name="([^"]+)" content="([^"]+)">/)[2];
          return {
            nombre: nombre,
            contenido: contenido
          };
        });

        // Comparar los metatags con la información del formulario
        const resultado = metatags.some(function(meta) {
          switch (meta.nombre) {
            case 'title':
              return meta.contenido.toLowerCase().indexOf(titulo.toLowerCase()) !== -1;
            case 'author':
              return meta.contenido.toLowerCase().indexOf(autor.toLowerCase()) !== -1;
            case 'genre':
              return meta.contenido.toLowerCase().indexOf(genero.toLowerCase()) !== -1;
            case 'lola':
              return meta.contenido.toLowerCase().indexOf(dui.toLowerCase()) !== -1
                || meta.contenido.toLowerCase().indexOf(mos.toLowerCase()) !== -1
                || meta.contenido.toLowerCase().indexOf(chovo.toLowerCase()) !== -1;
            default:
              return false;
          }
        });

        if (resultado) {
          // Mostrar el acceso directo al archivo HTML
          const enlace = document.createElement('a');
          enlace.href = './noticias/' + archivo;
          enlace.textContent = archivo;
          const divResultados = document.getElementById('resultados');
          divResultados.appendChild(enlace);
          divResultados.appendChild(document.createElement('br'));
        }
      };
    });

    if (resultados.length === 0) {
      mostrarMensaje('No se encontraron archivos');
    }
  };

  xhr.onerror = function() {
    mostrarError('Error al cargar los archivos HTML');
  };
}

function mostrarMensaje(mensaje) {
  const divResultados = document.getElementById('resultados');
  divResultados.textContent = mensaje;
}

function mostrarError(error) {
  const divResultados = document.getElementById('resultados');
 
const divError = document.createElement('div');
divError.classList.add('error');
divError.textContent = error;
divResultados.appendChild(divError);
}
